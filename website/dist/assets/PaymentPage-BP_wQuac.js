import{x as T,l as V,r as a,j as e}from"./index-P9AEKrjw.js";import{b as q}from"./tablets-DfLLxwQt.js";import{c as v}from"./createLucideIcon-CHvZU8O2.js";import{C as B}from"./check-WttHZ20i.js";import{C as j}from"./credit-card-BmlOc1T7.js";import{S as _}from"./shield-BDgtxSWW.js";import{C as z}from"./calendar-BULXiScO.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],H=v("arrow-left",W);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],m=v("circle-alert",R);function te(){const l=T(),i=V(),[n,w]=a.useState(null),[C,k]=a.useState(null),[o,u]=a.useState("pending"),[d,D]=a.useState(""),[h,b]=a.useState(""),[x,S]=a.useState(""),[g,P]=a.useState(""),[r,$]=a.useState({});if(a.useEffect(()=>{var s,t,c;(s=l.state)!=null&&s.orderData?(w(l.state.orderData),k(l.state.billingInfo||{}),(t=l.state.billingInfo)!=null&&t.firstName&&((c=l.state.billingInfo)!=null&&c.lastName)&&b(`${l.state.billingInfo.firstName} ${l.state.billingInfo.lastName}`)):i("/checkout")},[l.state,i]),!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});const p=n.items.reduce((s,t)=>s+t.currentPrice*t.quantity,0),f=n.voucherApplied?n.discountAmount:0,y=100,N=p-f+y,I=s=>s.replace(/\D/g,"").replace(/(\d{4})(?=\d)/g,"$1 ").slice(0,19),E=s=>{const t=s.replace(/\D/g,"");return t.length>2?`${t.slice(0,2)}/${t.slice(2,4)}`:t},F=s=>{const t=I(s.target.value);D(t)},M=s=>{const t=E(s.target.value);S(t)},L=()=>{const s={};if(d.replace(/\s/g,"").match(/^\d{16}$/)||(s.cardNumber="Please enter a valid 16-digit card number"),h.trim()||(s.cardName="Please enter the cardholder name"),!x.match(/^(0[1-9]|1[0-2])\/\d{2}$/))s.expiryDate="Please enter a valid expiry date (MM/YY)";else{const[t,c]=x.split("/");new Date(2e3+parseInt(c),parseInt(t)-1)<new Date&&(s.expiryDate="Card has expired")}return g.match(/^\d{3,4}$/)||(s.cvv="Please enter a valid CVV (3-4 digits)"),$(s),Object.keys(s).length===0},A=s=>{s.preventDefault(),L()&&(u("processing"),setTimeout(()=>{u("success"),setTimeout(()=>{i("/order-success",{state:{orderData:n,billingInfo:C,orderNumber:Math.floor(1e5+Math.random()*9e5).toString(),paymentDetails:{last4:d.slice(-4),cardType:Y(d)}}})},2e3)},3e3))},Y=s=>{const t=s.replace(/\s/g,"");return t.startsWith("4")?"Visa":/^5[1-5]/.test(t)?"MasterCard":/^3[47]/.test(t)?"American Express":/^6(?:011|5)/.test(t)?"Discover":"Unknown"},O=()=>{i(-1)};return e.jsx("div",{className:"bg-gray-50 min-h-screen py-8",children:e.jsxs("div",{className:"mx-auto px-4 w-full",children:[e.jsxs("button",{onClick:O,className:"flex items-center text-blue-600 mb-6 hover:text-blue-800 transition-colors",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"Back to checkout"]}),e.jsxs("h1",{className:"text-3xl font-semibold text-gray-900 mb-8 tracking-tight",children:["Complete Your Payment",e.jsx("span",{className:"block w-20 mt-2 h-1 bg-blue-600"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"w-full lg:w-8/12",children:o==="success"?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 border border-gray-200 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(B,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your order has been processed successfully."}),e.jsx("p",{className:"text-gray-500",children:"Redirecting to order confirmation..."})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 transition-all duration-300 hover:shadow-md",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center mb-6",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-blue-600"}),"Card Payment"]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-100 flex items-start",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Your payment information is secured with SSL encryption. We do not store your card details."})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number*"}),e.jsxs("div",{className:`relative ${r.cardNumber?"shake":""}`,children:[e.jsx("input",{type:"text",value:d,onChange:F,placeholder:"1234 5678 9012 3456",className:`pl-10 block w-full px-3 py-2 border ${r.cardNumber?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200`,maxLength:19}),e.jsx(j,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),r.cardNumber&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),r.cardNumber]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name*"}),e.jsx("input",{type:"text",value:h,onChange:s=>b(s.target.value),placeholder:"John Smith",className:`block w-full px-3 py-2 border ${r.cardName?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200`}),r.cardName&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),r.cardName]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date*"}),e.jsxs("div",{className:`relative ${r.expiryDate?"shake":""}`,children:[e.jsx("input",{type:"text",value:x,onChange:M,placeholder:"MM/YY",className:`pl-10 block w-full px-3 py-2 border ${r.expiryDate?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200`,maxLength:5}),e.jsx(z,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),r.expiryDate&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),r.expiryDate]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV*"}),e.jsx("input",{type:"password",value:g,onChange:s=>P(s.target.value.replace(/\D/g,"").substring(0,4)),placeholder:"123",className:`block w-full px-3 py-2 border ${r.cvv?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200`,maxLength:4}),r.cvv&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),r.cvv]})]})]}),e.jsx("button",{type:"submit",disabled:o==="processing",className:`mt-2 w-full text-white py-3 px-4 rounded-md font-medium flex items-center justify-center transition-all duration-300 transform hover:scale-[1.01] active:scale-[0.99] ${o==="processing"?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:o==="processing"?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:["Pay €",N.toFixed(2)]})})]})]})}),e.jsx("div",{className:"w-full lg:w-4/12",children:e.jsx("div",{className:"sticky top-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 transition-all duration-300 hover:shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Order summary"}),e.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto mb-4",children:n.items.map(s=>e.jsxs("div",{className:"flex items-start space-x-4 p-3 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image||q,alt:s.name,className:"h-12 w-12 object-cover rounded-md"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-800 bg-gray-100 px-2 py-0.5 rounded",children:["×",s.quantity]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["€",(s.currentPrice*s.quantity).toFixed(2)]})]})]})]},s.id))}),e.jsxs("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Original price"}),e.jsxs("span",{className:"text-gray-800",children:["€",p.toFixed(2)]})]}),n.voucherApplied&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discount"}),e.jsxs("span",{className:"text-green-600",children:["-€",f.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax"}),e.jsxs("span",{className:"text-gray-800",children:["€",y.toFixed(2)]})]}),e.jsx("div",{className:"pt-3 mt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["€",N.toFixed(2)]})]})})]})]})})})]})]})})}export{te as default};
